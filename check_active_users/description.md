
# Скрипт: `check_active_users.sh`

## Назначение

Скрипт проверяет, какие пользователи **активны**, объединяя данные из трёх источников:

1. `users.txt` — список логинов пользователей (один логин на строку)
2. `logins.csv` — CSV-файл с датами последнего входа (`login,last_login`)
3. `banned.json` — JSON-массив с логинами заблокированных пользователей

Скрипт сохраняет результат в `active_users.csv`, включая пользователей:
- из `users.txt`
- **не** заблокированных
- заходивших **за последние 30 дней**

---

## Пример входных файлов

### `users.txt`

```
alice
bob
carol
dave
```

### `logins.csv`
```csv
login,last_login
alice,2025-04-10
bob,2025-01-15
carol,2025-04-25
dave,2024-12-31
```

### `banned.json`

```
["bob", "dave"]
```

##  Пример запуска


chmod +x check_active_users.sh
./check_active_users.sh users.txt logins.csv banned.json

## Выходной файл: active_users.csv
```
login,last_login
alice,2025-04-10
carol,2025-04-25
```

## ⚠️ Обработка ошибок
- Если логин заблокирован или не заходил в систему более 30 дней, он исключается
- При отсутствии данных или ошибках форматирования — скрипт сообщает об этом в консоль
- Поддержка пустых файлов
 
## Как определяется "последние 30 дней"
Скрипт использует текущую дату и date -d/date -r для сравнения разницы в днях.

## Что можно протестировать
- Пользователи из users.txt, но забаненные — исключаются

- Старые даты последнего входа — исключаются

- Валидный и невалидный JSON

- Отсутствие логина в logins.csv

- Пустые файлы

## Зависимости
Скрипт использует:

jq — для чтения JSON

bash версии 4+

date — для обработки дат

Убедитесь, что jq установлен:

`sudo apt install jq  # для Ubuntu`

### Структура проекта

```
repo/
├── check_active_users.sh
├── users.txt
├── logins.csv
├── banned.json
├── active_users.csv
├── README.md  ← этот файл
```

